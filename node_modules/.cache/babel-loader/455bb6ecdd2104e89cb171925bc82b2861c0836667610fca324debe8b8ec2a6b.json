{"ast":null,"code":"import _objectSpread from \"/home/arthur/Documents/GitHub/TP-DrMad/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/home/arthur/Documents/GitHub/TP-DrMad/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/arthur/Documents/GitHub/TP-DrMad/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport CheckedList from '../components/CheckedList.vue';\nimport { mapActions } from \"vuex\";\nexport default {\n  components: {\n    CheckedList: CheckedList\n  },\n  data: function data() {\n    return {\n      orders: []\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _this.getAllOrderFromClient();\n          case 2:\n            _this.orders = _context.sent;\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions(['getAllOrderFromClient', 'annulationOrder'])), {}, {\n    payOrder: function payOrder(orderId) {\n      this.$router.push(\"/shop/pay/\".concat(orderId.uuid));\n    },\n    annulerOrder: function annulerOrder(orderId) {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _this2.annulationOrder(orderId.uuid);\n            case 2:\n              res = _context2.sent;\n              if (res === -1) {\n                alert(\"Une erreur est survenue. La commande n'a pas pu être annulé.\");\n              }\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    }\n  })\n};","map":{"version":3,"names":["CheckedList","mapActions","components","data","orders","mounted","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","getAllOrderFromClient","sent","stop","methods","_objectSpread","payOrder","orderId","$router","push","concat","uuid","annulerOrder","_this2","_callee2","res","_callee2$","_context2","annulationOrder","alert"],"sources":["src/views/ShopOrders.vue"],"sourcesContent":["<!-- ShopOrders.vue -->\r\n<template>\r\n  <div>\r\n    <h2>Historique des commandes</h2>\r\n    <CheckedList\r\n        :data=\"orders\"\r\n        :fields=\"['uuid', 'total', 'date', 'status']\"\r\n        :itemButton=\"{ show: false, text: 'SomeText' }\"\r\n        :itemButtonPayer=\"{ show: true, text: 'Payer' }\"\r\n        :itemButtonAnnuler=\"{ show: true, text: 'Annuler' }\"\r\n        :listButton=\"{ show: false, text: 'SomeText' }\"\r\n        :itemAmount=\"false\"\r\n        :checkbox=\"false\"\r\n        @payer=\"payOrder\"\r\n        @annuler=\"annulerOrder\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CheckedList from '../components/CheckedList.vue';\r\nimport {mapActions} from \"vuex\";\r\nexport default {\r\n  components: {\r\n    CheckedList,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      orders: [],\r\n    };\r\n  },\r\n\r\n  async mounted() {\r\n    this.orders = await this.getAllOrderFromClient();\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\r\n      'getAllOrderFromClient',\r\n      'annulationOrder'\r\n    ]),\r\n\r\n    payOrder(orderId) {\r\n      this.$router.push(`/shop/pay/${orderId.uuid}`);\r\n    },\r\n\r\n    async annulerOrder(orderId) {\r\n      const res = await this.annulationOrder(orderId.uuid);\r\n      if (res === -1) {\r\n        alert(\"Une erreur est survenue. La commande n'a pas pu être annulé.\")\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>"],"mappings":";;;;AAoBA,OAAAA,WAAA;AACA,SAAAC,UAAA;AACA;EACAC,UAAA;IACAF,WAAA,EAAAA;EACA;EAEAG,IAAA,WAAAA,KAAA;IACA;MACAC,MAAA;IACA;EACA;EAEAC,OAAA,WAAAA,QAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;MAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACAT,KAAA,CAAAU,qBAAA;UAAA;YAAAV,KAAA,CAAAF,MAAA,GAAAS,QAAA,CAAAI,IAAA;UAAA;UAAA;YAAA,OAAAJ,QAAA,CAAAK,IAAA;QAAA;MAAA,GAAAR,OAAA;IAAA;EACA;EAEAS,OAAA,EAAAC,aAAA,CAAAA,aAAA,KACAnB,UAAA,EACA,yBACA,kBACA;IAEAoB,QAAA,WAAAA,SAAAC,OAAA;MACA,KAAAC,OAAA,CAAAC,IAAA,cAAAC,MAAA,CAAAH,OAAA,CAAAI,IAAA;IACA;IAEAC,YAAA,WAAAA,aAAAL,OAAA;MAAA,IAAAM,MAAA;MAAA,OAAArB,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAoB,SAAA;QAAA,IAAAC,GAAA;QAAA,OAAAtB,mBAAA,GAAAG,IAAA,UAAAoB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAlB,IAAA,GAAAkB,SAAA,CAAAjB,IAAA;YAAA;cAAAiB,SAAA,CAAAjB,IAAA;cAAA,OACAa,MAAA,CAAAK,eAAA,CAAAX,OAAA,CAAAI,IAAA;YAAA;cAAAI,GAAA,GAAAE,SAAA,CAAAf,IAAA;cACA,IAAAa,GAAA;gBACAI,KAAA;cACA;YAAA;YAAA;cAAA,OAAAF,SAAA,CAAAd,IAAA;UAAA;QAAA,GAAAW,QAAA;MAAA;IACA;EAAA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}